<form>
	<div id="supEditData" class="list-panel datasource" data-datasource="">
		<!--start-->
		<div class="padding-top-1"></div>
		<div class="list-box img-photo-box">
			<div class="list-defult-body box-h boder-none">
				<div class="box-flex">
					<span class="title">名称</span>
				</div>
				<div class="">
					<img class="header-picture fromfield" data-fromfield="photo" src="img/icon/defult-photo.png" alt="默认头像" onclick="common.pickImg(this)" />
					<input class="editor-input fromfield" data-fromfield="photo" type="hidden" name="photo" value="" />
				</div>
				<div class="icon-next">
					<i class="icon-img icon-img-next"></i>
				</div>
			</div>
		</div>
		<!--end-->

		<div class="padding-top-1"></div>
		<div class="list-box">
			<div class="list-defult-body box-h ">
				<div class="box-flex">
					<span class="title">姓名</span>
				</div>
				<div class="text-input-box">
					<input class="editor-input fromfield" data-fromfield="name" type="text" name="name" required="required" data-warning="姓名不能为空" placeholder="未填写 " value="" />
				</div>
				<div class="icon-next"></div>
			</div>
		</div>
		<div class="list-box">
			<div class="list-defult-body box-h ">
				<div class="box-flex">
					<span class="title">网名</span>
				</div>
				<div class="text-input-box">
					<input class="editor-input fromfield" data-fromfield="netName" type="text" name="netName" placeholder="未填写 " value="" />
				</div>
				<div class="icon-next"></div>
			</div>
		</div>
		<div class="list-box">
			<div class="list-defult-body box-h">
				<div class="box-flex">
					<span class="title">年龄</span>
				</div>
				<div class="text-input-box">
					<!--<input class="editor-input fromfield" type="text" name="birthday" data-minDate="1970-01-01" readonly="readonly" onclick="common.pickDateYMD(this);" placeholder="未填写" value="" />-->
					<input class="editor-input fromfield" data-fromfield="age" type="number" name="age" required="required" data-warning="年龄不能为空" placeholder="未填写 " value="" />
				</div>
				<div class="icon-next"></div>
			</div>
		</div>
		<div class="list-box">
			<div class="list-defult-body box-h">
				<div class="box-flex">
					<span class="title dataRoleName">角色</span>
				</div>
				<div class="icon-text-box">
					<span class="nav">资助人</span>
				</div>
			</div>
		</div>
		<div class="padding-top-1"></div>
		<div class="list-box">
			<div class="list-defult-body box-h ">
				<div class="box-flex">
					<span class="title">电话</span>
				</div>
				<div class="text-input-box">
					<input class="editor-input fromfield" data-fromfield="mobile" type="text" name="mobile" required="required" data-warning="请填写电话" placeholder="未填写 " value="" />
				</div>
				<div class="icon-next"></div>
			</div>
		</div>
		<div class="list-box pwdbox">
			<!--<div class="list-defult-body box-h ">
				<div class="box-flex">
					<span class="title">密码</span>
				</div>
				<div class="text-input-box">
					<input class="editor-input fromfield" data-fromfield="password" type="text" name="password" data-check="^[0-9A-Za-z]{6,}$" data-warning="密码不能为空" placeholder="未填写" data-warning-check="密码至少为6位" />
				</div>
				<div class="icon-next"></div>
			</div>-->
		</div>
		<div class="list-box">
			<div class="list-defult-body box-h ">
				<div class="box-flex">
					<span class="title">邮箱</span>
				</div>
				<div class="text-input-box">
					<input class="editor-input fromfield" data-fromfield="email" type="text" name="email" data-check="^\w+([-+.]\w+)*@\w+([-.]\\w+)*\.\w+([-.]\w+)*$" data-warning-check="邮箱格式不正确" placeholder="未填写 " value="" />
				</div>
				<div class="icon-next"></div>
			</div>
		</div>
		<div class="list-box">
			<div class="list-defult-body box-h ">
				<div class="box-flex">
					<span class="title">QQ</span>
				</div>
				<div class="text-input-box">
					<input class="editor-input fromfield" data-fromfield="qq" type="text" name="qq" data-check="^[0-9]*$" data-warning-check="qq账号格式不正确" placeholder="未填写 " value="" />
				</div>
				<div class="icon-next"></div>
			</div>
		</div>

		<div class="list-box">
			<div class="list-defult-body box-h ">
				<div class="box-flex">
					<span class="title">省市区</span>
				</div>
				<div class="icon-text-box " id="sel_city5">
					<span class="nav fromfield set_city" data-unionchar=" " data-fromfield="province,city,area">未选择</span>
					<input hidden="hidden" class="editor-input fromfield" data-fromfield="province" name="province" value="" />
					<input hidden="hidden" class="editor-input fromfield" data-fromfield="city" name="city" value="" />
					<input hidden="hidden" class="editor-input fromfield" data-fromfield="area" name="area" value="" />
				</div>
				<div class="icon-next">
					<i class="icon-img icon-img-next"></i>
				</div>
			</div>
		</div>
		<div class="list-box">
			<div class="list-defult-body box-h ">
				<div class="box-flex">
					<span class="title">详细地址</span>
				</div>
				<div class="text-input-box">
					<input class="editor-input fromfield" data-fromfield="address" type="text" name="address" data-warning="请选择" placeholder="未填写 " value="" />
				</div>
				<div class="icon-next"></div>
			</div>
		</div>
		<div class="list-box">
			<div class="list-defult-body box-h boder-none">
				<div class="box-flex">
					<span class="title">加入时间</span>
				</div>
				<div class="text-input-box">
					<input class="editor-input fromfield " data-fromfield="joinTime" type="text" name="joinTime" readonly="readonly" placeholder="未加入" data-minDate="1970-01-01" onclick="common.pickDateYMD(this);" value="" />
				</div>
				<div class="icon-next"></div>
			</div>
		</div>
	</div>
</form>
<script type="text/javascript">
	var supupdateId = null;

	function loadsupEdit(obj) {
		pageScrollToTop();
		supupdateId = $(obj).attr("data-id");
		cityfunc.add("sel_city5");
		if(supupdateId != 0) {
			iniSupEditInfo();
			supEditPwdHtml('edit');
		} else {
			supEditFooter();
			supEditPwdHtml('add');
		}
	}

	function supEditFooter() {
		var btuHtml = '';
		var jsondata = {};
		btuHtml += '<div class="footerBtu bg-color-brown" onclick="supEditFooterFuncAdd(this)">';
		btuHtml += '<a class="all supEdit-save" href="javascript:void(0);">保存</a>';
		btuHtml += '</div>';
		jsondata.container = 'supEdit';
		jsondata.buttonHtml = btuHtml;
		common.commonFooterBtu(jsondata);
	}

	function iniSupEditInfo() {
		ajaxFuncs.get({
			urlname: "/api/user/sponsor/" + supupdateId,
			funcs: {
				funcSuccessful: function(data) {
					var btuHtml = '';
					btuHtml += '<div class="footerBtu bg-color-brown" onclick="supEditFooterFuncPut(this)">';
					btuHtml += '<a class="all supEdit-save" href="javascript:void(0);">保存</a>';
					btuHtml += '</div>';
					loadData.load({
						data: data,
						container: "supEdit",
						readOnly: false,
						buttons: btuHtml,
						barbutton: true,
						callback: function() {}
					});
				}
			}
		});
	}

	function supEditFooterFuncPut(obj) {
		var params = common.serializeToJson("#supEdit form");
		if(!common.validate("#supEdit form", obj)) {
			return false;
		} else {
			params.id = supupdateId;
			ajaxFuncs.put({
				clickobj: obj,
				urlname: "/api/user/sponsor",
				params: params,
				funcs: {
					funcSuccessful: function(data) {
						common.toast("编辑成功");
						//						$.ui.parsePanelFunctions($("#suplist"), $.query("#supEdit").get(0));
						$.ui.goBack();
						$.ui.parsePanelFunctions($.query("#suplist").get(0), $.query("#supEdit").get(0));
					}
				}
			})
		}
	}

	function supEditFooterFuncAdd(obj) {
		var params = common.serializeToJson("#supEdit form");
		if(!common.validate("#supEdit form", obj)) {
			return false;
		} else {
			ajaxFuncs.post({
				clickobj: obj,
				urlname: "/api/user/sponsor",
				params: params,
				funcs: {
					funcSuccessful: function(data) {
						common.toast("编辑成功");
						$.ui.goBack();
						$.ui.parsePanelFunctions($("#suplist"), $.query("#supEdit").get(0));
					}
				}
			})
		}
	}

	function supEditPwdHtml(type) {
		var html = '';
		if(type == 'add') {
			html += '<div class="list-defult-body box-h ">';
			html += '<div class="box-flex">';
			html += '<span class="title">密码</span>';
			html += '</div>';
			html += '<div class="text-input-box">';
			html += '<input class="editor-input fromfield" data-fromfield="password" type="text" name="password" data-check="^[0-9A-Za-z]{6,}$" data-warning="密码不能为空" placeholder="未填写" data-warning-check="密码至少为6位" />';
			html += '</div>';
			html += '<div class="icon-next"></div>';
			html += '</div>';
		} else {
			html += '<div class="list-defult-body box-h" data-tkey="restPwd" data-dir="general" data-transition="slide" onclick="common.loadPage(this)">';
			html += '<div class="box-flex">';
			html += '<span class="title">修改密码</span>';
			html += '</div>';
			html += '<div class="icon-next"><i class="icon-img icon-img-next"></i></div>';
			html += '</div>';
		}
		$("#supEdit .pwdbox").empty().append(html);
	}
</script>